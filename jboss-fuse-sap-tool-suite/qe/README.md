# JBoss Tools Fuse SAP QE

## Structure

 - qe/plugins/org.jboss.tools.fuse.sap.qe.reddeer
   RedDeer framework based on JBoss Tools Fuse SAP
 - qe/tests/org.jboss.tools.fuse.sap.qe.reddeer.tests
   RedDeer tests for JBoss Tools Fuse SAP

## Prerequistes

 - an update site which includes bundled SAP libraries, e.g. the one generated by Import wizard in IDE
   - the update site is specified by -Dtest.sapRepository
 - a runing SAP instance
   - host and credentials are sprecified by -Drd.config

## Executing tests from command line

The QE tests are disabled by default. To enable them you need to set

    -DskipQETests=false

It is also recommended to ignore local artifacts

    -Dtycho.localArtifacts=ignore

You may also get errors from baseline comparison, so disable it

    -Dtycho.baseline=disable
    -DskipBaselineComparison=true

So, the final command should look like

    mvn clean verify -pl qe/tests/org.jboss.tools.fuse.sap.qe.reddeer.tests -am \
    	-DskipQETests=false \
    	-Dtycho.localArtifacts=ignore \
    	-Dtycho.baseline=disable \
    	-DskipBaselineComparison=true \
    	-DfailIfNoTests=false \
    	-Dtest.sapRepository=<UPDATE_SITE_WITH_SAP_LIBS> \
    	-Dtest=SmokeTests

## Executing tests against an existing Eclipse instance

    -Dtest.installBase=${ECLIPSE_HOME}
    -Dtest.installBase=${DEVSTUDIO_HOME}/studio

## Debugging tests when running from command line

Just add the following system property

    -DdebugPort=8001

and in IDE create a configuration for Remote Java Application in Run > Debug Configurations...

## Executing tests from IDE

Current version of JBoss Tools Fuse SAP is built on Eclipse Oxygen, so download Eclipse Oxygen for JEE Developers. For executing the tests from IDE you need

 - Target Platform (targetplatform/)
 - RedDeer UI Tools (http://download.jboss.org/jbosstools/neon/development/updates/reddeer/)

and follow these steps:

1. Import the project as Existing Projects into Workspace (Search for nested projects)
2. Check 'Search for nested projects' and select all projects
3. In preferences go to Plug-in Development > Target Platform
4. Add empty target definition and include the Target Platform as a directory
5. In preferences also allow forbidden references (Java > Compiler > Errors/Warnings)
6. Install RedDeer UI Tools which includes RedDeer launcher
7. After restart you should see a launcher called 'RedDeer Test Linux x86_64'
8. Run the launcher (at the moment it takes about 2 minutes to run the tests)
